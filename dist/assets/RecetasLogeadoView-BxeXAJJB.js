import{_ as O,b as s,k as K,o as a,c as o,a as e,w,l as W,F as m,r as b,t as u,u as x,v as h,d as X,n as C,m as _,e as G,p as V}from"./index-Bd3iIt6k.js";import{s as Y}from"./servicioIngredientesLogeado-B_vFbkMm.js";import{S as ee}from"./servicioIngredientes-dAZNO5r2.js";import{V as le}from"./VentanaToast-ZZRtjFVJ.js";import{d as N,c as ne,a as ae,b as oe}from"./cantidades.helper-CQYEJ_OI.js";const se={class:"bus"},te={class:"tipo"},ie=["value"],ue={class:"buscador"},re={class:"paginacion"},ve=["disabled"],de={class:"prueba"},ce=["onClick"],pe={__name:"PanelIngredientesLogeado",emits:["ingredienteSeleccionado"],setup(B,{expose:E,emit:p}){const d=s(""),v=s(""),i=s(1),g=Y;g.cargarIngredientesLogeado();const I=g.ingredientesUsuario,k=new ee,y=k.tipos;k.cargarTipos();const P=p;E({limpiarPanel:D});function f(){g.cargarIngredientesLogeado({nombre:d.value,tipo:v.value,pagina:i.value})}function T(){i.value=1,f()}const L=()=>{I.value.length>=20&&(i.value++,f())},R=()=>{i.value>1&&(i.value--,f())};function S(c){c.seleccionado||(c.seleccionado=!0,P("ingredienteSeleccionado",c),console.log(c))}K(v,()=>{f()});function D(){I.value.forEach(c=>{c.seleccionado=!1,d.value="",v.value="",i.value=1}),f()}return(c,r)=>(a(),o(m,null,[e("div",se,[r[4]||(r[4]=e("h1",null,"Busca tus ingredientes",-1)),e("form",null,[e("div",te,[r[3]||(r[3]=e("span",null,"Selecciona por tipo de ingrediente",-1)),w(e("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>v.value=t)},[r[2]||(r[2]=e("option",{value:"null"},"Selecciona un tipo",-1)),(a(!0),o(m,null,b(x(y),t=>(a(),o("option",{key:t.tipo,value:t.tipo},u(t.tipo),9,ie))),128))],512),[[W,v.value]])]),e("div",ue,[w(e("input",{type:"search","onUpdate:modelValue":r[1]||(r[1]=t=>d.value=t),placeholder:"Busca por una palabra"},null,512),[[h,d.value]])]),e("button",{onClick:X(T,["prevent"])},"Buscar")])]),e("div",re,[e("button",{onClick:R,disabled:i.value===1},"Anterior",8,ve),e("span",null,"Página "+u(i.value),1),e("button",{onClick:L},"Siguiente")]),e("div",de,[(a(!0),o(m,null,b(x(I),t=>(a(),o("div",{class:C(["card",{seleccionado:t.seleccionado}]),key:t.id,onClick:$=>S(t)},[e("p",null,u(t.nombre),1)],10,ce))),128))])],64))}},me=O(pe,[["__scopeId","data-v-2311ae5b"]]),fe={class:"recetas-usuario-view"},ge={class:"contenedor"},be={class:"pasos"},Ie={class:"numero-personas"},ke={class:"listaIngredientes"},Se={class:"listaIngredientes"},Ae={class:"listaIngredientes"},ye={class:"descripcion"},Pe={key:0},_e={class:"panel"},Ce={key:1,class:"resumen"},Ee={class:"listaIngredientes"},Te={class:"listaIngredientes"},Le={class:"listaIngredientes"},Re={class:"descripcionFinal"},De={class:"textoFinal"},Ve={class:"toast"},we={__name:"RecetasLogeadoView",setup(B){const E=s(""),p=s(1),d=s([]),v=s([]),i=s([]),g=s(""),I=s(!1),k=s(!1),y=s(!1),P=s(!1),f=s(null),T=s(null),L=s(null),R=s(null),S=s(1),D=s(null),c=s(!1),r=s(!1),t=s(!1),$=s("¡Receta agragada a la lista de la compra!");function F(){t.value=!0,setTimeout(()=>{t.value=!1,window.location.reload()},2e3)}function U(){D.value&&D.value.limpiarPanel()}function M(){I.value=!0,c.value=!0,V(()=>{f.value&&f.value.scrollIntoView({behavior:"smooth",block:"center"}),U()})}function j(){k.value=!0,V(()=>{T.value&&T.value.scrollIntoView({behavior:"smooth",block:"center"}),U()})}function z(){y.value=!0,V(()=>{L.value&&L.value.scrollIntoView({behavior:"smooth",block:"center"}),U()})}function J(){P.value=!0,V(()=>{R.value&&R.value.scrollIntoView({behavior:"smooth",block:"center"}),U()})}function Q(A){I.value&&!k.value&&d.value.push(ne(A,p.value)),k.value&&!y.value&&v.value.push(ae(A,p.value)),y.value&&!P.value&&i.value.push(oe(A,p.value)),P.value}function q(){d.value=N(d.value),v.value=N(v.value),i.value=N(i.value),V(()=>{c.value=!1,r.value=!0})}function Z(){let A=JSON.parse(localStorage.getItem("recetasUsuario"))||[];A.push({nombre:E.value,numeroDePersonas:p.value,principal:d.value,acompanamiento:v.value,condimentos:i.value,descripcion:g.value}),localStorage.setItem("recetasUsuario",JSON.stringify(A)),F()}return(A,l)=>(a(),o(m,null,[e("div",fe,[l[23]||(l[23]=e("div",null,[e("h1",null,"Recetas"),e("h2",null,"Crear receta")],-1)),e("div",ge,[e("div",be,[e("div",{class:C(["p1",{active:S.value.value===1}])},[l[5]||(l[5]=e("h2",null,"PASO 1",-1)),l[6]||(l[6]=e("h3",null,"Ingresa el número de personas",-1)),e("div",Ie,[e("label",null,[l[4]||(l[4]=e("span",null,"Número de personas:",-1)),w(e("input",{type:"number","onUpdate:modelValue":l[0]||(l[0]=n=>p.value=n),min:"1"},null,512),[[h,p.value]])])]),e("button",{onClick:M},"SIGUIENTE")],2),I.value?(a(),o("div",{key:0,class:C(["p2",{active:S.value.value===2}]),ref_key:"div2",ref:f},[l[7]||(l[7]=e("h2",null,"PASO 2",-1)),l[8]||(l[8]=e("h3",null,"Elige el ingrediente principal",-1)),e("div",ke,[e("ol",null,[(a(!0),o(m,null,b(d.value,(n,H)=>(a(),o("li",{key:H},u(n.nombre),1))),128))])]),e("button",{onClick:j},"SIGUIENTE")],2)):_("",!0),k.value?(a(),o("div",{key:1,class:C(["p3",{active:S.value.value===3}]),ref_key:"div3",ref:T},[l[9]||(l[9]=e("h2",null,"PASO 3",-1)),l[10]||(l[10]=e("h3",null,"Elige el acompañamiento",-1)),e("div",Se,[e("ol",null,[(a(!0),o(m,null,b(v.value,n=>(a(),o("li",{key:n.id},u(n.nombre),1))),128))])]),e("button",{onClick:z},"SIGUIENTE")],2)):_("",!0),y.value?(a(),o("div",{key:2,class:C(["p4",{active:S.value.value===4}]),ref_key:"div4",ref:L},[l[11]||(l[11]=e("h2",null,"PASO 4",-1)),l[12]||(l[12]=e("h3",null,"Elige los condimentos para hacer la receta",-1)),e("div",Ae,[e("ol",null,[(a(!0),o(m,null,b(i.value,n=>(a(),o("li",{key:n.id},u(n.nombre),1))),128))])]),e("button",{onClick:J},"SIGUIENTE")],2)):_("",!0),P.value?(a(),o("div",{key:3,class:C(["p5",{active:S.value.value===5}]),ref_key:"div5",ref:R},[l[13]||(l[13]=e("h2",null,"PASO 5",-1)),l[14]||(l[14]=e("h3",null,"Finaliza la receta escribiendo una descripcion si es necesario",-1)),l[15]||(l[15]=e("h3",null,"¿Qué tal si compartes tu receta con la comunidad?",-1)),e("div",ye,[w(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=n=>g.value=n)},null,512),[[h,g.value]]),e("button",{onClick:q},"FINALIZAR")])],2)):_("",!0)]),c.value?(a(),o("div",Pe,[e("div",_e,[G(me,{onIngredienteSeleccionado:Q,ref_key:"panelIngredientesLogeadoRef",ref:D},null,512)])])):_("",!0),r.value?(a(),o("div",Ce,[l[18]||(l[18]=e("h2",null,"Resumen de la Receta",-1)),e("h3",null,"Para "+u(p.value)+" "+u(p.value===1?"persona":"personas"),1),l[19]||(l[19]=e("h3",null,"Principal",-1)),e("div",Ee,[e("ol",null,[(a(!0),o(m,null,b(d.value,n=>(a(),o("li",{key:n.id},u(n.nombre)+" - "+u(n.cantidad)+" Grs",1))),128))])]),l[20]||(l[20]=e("h3",null,"Acompañamiento",-1)),e("div",Te,[e("ol",null,[(a(!0),o(m,null,b(v.value,n=>(a(),o("li",{key:n.id},u(n.nombre)+" - "+u(n.cantidad)+" Grs",1))),128))])]),l[21]||(l[21]=e("h3",null,"Condimentos",-1)),e("div",Le,[e("ol",null,[(a(!0),o(m,null,b(i.value,n=>(a(),o("li",{key:n.id},u(n.nombre)+" - "+u(n.cantidad)+" Grs",1))),128))])]),l[22]||(l[22]=e("h3",null,[e("strong",null,"Descripción:")],-1)),e("pre",Re,u(g.value),1),e("div",De,[l[16]||(l[16]=e("h3",null,"¿QUIERES PASAR TU RECETA A LA LISTA DE LA COMPRA?",-1)),l[17]||(l[17]=e("h3",null,"Agrega un nombre a tu receta",-1)),w(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=n=>E.value=n)},null,512),[[h,E.value]]),e("button",{onClick:l[3]||(l[3]=n=>Z())},"AGREGAR A LA LISTA DE LA COMPRA")])])):_("",!0)])]),e("div",Ve,[G(le,{verToast:t.value,mensajeToast:$.value},null,8,["verToast","mensajeToast"])])],64))}},Ge=O(we,[["__scopeId","data-v-a904a79d"]]);export{Ge as default};
