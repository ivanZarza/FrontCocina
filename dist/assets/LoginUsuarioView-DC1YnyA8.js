import{b as a,_ as b,c as y,a as o,f,e as _,g as x,w as p,v,d as E,h as L,o as R,i as S,j}from"./index-Bd3iIt6k.js";import{V as D}from"./VentanaToast-ZZRtjFVJ.js";const I={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3000"},{VITE_API_URL:k}=I;class q{constructor(){this.datosLogin=a({})}async loginUsuario({nombre:u,apellidos:c,contraseña:r}){try{console.log("loginUsuario",{nombre:u,apellidos:c,contraseña:r});const t=await fetch(`${k}/api/listadelacompra/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:u,apellidos:c,contraseña:r}),credentials:"include"});if(!t.ok){const l=await t.json();throw new Error(l.error||"Error al loguear usuario: "+t.status)}const n=await t.json();this.datosLogin.value=n}catch(t){throw console.error(t),t}}}const A=new q,C={class:"container"},N={class:"input"},B={class:"input"},O={class:"input"},P={__name:"LoginUsuarioView",setup(g){const u=S(),c=j(),r=a(""),t=a(""),n=a(""),l=a(""),d=a(!1),T=a({}),w=async()=>{try{const s=await A.loginUsuario({nombre:r.value,apellidos:t.value,contraseña:n.value});T.value=s,l.value="Usuario logueado correctamente",m(),setTimeout(()=>{U()},2100)}catch(s){console.error(s),l.value=s.message,m()}},U=()=>{const s=c.query.redirect||"/me/datos";u.push(s)};function m(){d.value=!0,setTimeout(()=>{d.value=!1},2e3)}return(s,e)=>{const V=L("router-link");return R(),y("div",C,[e[9]||(e[9]=o("h2",null,"Introduce tus credenciales para acceder a la aplicación.",-1)),o("h2",null,[e[4]||(e[4]=f("Si no tienes cuenta, puedes crear una ")),_(V,{to:"/crearUsuario",class:"enlace"},{default:x(()=>e[3]||(e[3]=[f("aquí")])),_:1})]),o("form",{class:"form",onSubmit:E(w,["prevent"])},[o("label",N,[e[5]||(e[5]=o("span",null,"Nombre",-1)),p(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>r.value=i),required:""},null,512),[[v,r.value]])]),o("label",B,[e[6]||(e[6]=o("span",null,"Apellidos",-1)),p(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>t.value=i),required:""},null,512),[[v,t.value]])]),o("label",O,[e[7]||(e[7]=o("span",null,"Contraseña",-1)),p(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>n.value=i),required:""},null,512),[[v,n.value]])]),e[8]||(e[8]=o("button",{class:"btn",type:"submit"},"Entrar",-1)),o("div",null,[_(D,{mensajeToast:l.value,verToast:d.value},null,8,["mensajeToast","verToast"])])],32)])}}},J=b(P,[["__scopeId","data-v-2ad89af5"]]);export{J as default};
