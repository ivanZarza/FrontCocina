import{_ as g,b as u,o as _,c as U,a as o,w as c,v,d as b,e as f,F as w}from"./index-Bd3iIt6k.js";import{V as T}from"./VentanaToast-ZZRtjFVJ.js";const V={class:"total"},y={class:"contenedor1"},C={class:"form"},D={class:"nombre"},E={class:"apellidos"},R={class:"contraseña"},x={class:"contraseña2"},h={__name:"CrearUsuario",emits:["crearUsuario"],setup(m,{emit:t}){const l=t,r=u(""),s=u(""),a=u(""),n=u("");function d(){l("crearUsuario",{nombre:r.value,apellidos:s.value,contraseña:a.value,contraseña2:n.value}),console.log("Datos enviados",r.value,s.value,a.value,n.value)}return(p,e)=>(_(),U("div",V,[o("div",y,[e[8]||(e[8]=o("div",{class:"rotulo"},[o("h1",null,"Crear usuario")],-1)),o("div",C,[o("form",null,[o("div",D,[e[4]||(e[4]=o("label",{for:"nombre"},"Nombre",-1)),c(o("input",{type:"text",id:"nombre","onUpdate:modelValue":e[0]||(e[0]=i=>r.value=i)},null,512),[[v,r.value]])]),o("div",E,[e[5]||(e[5]=o("label",{for:"apellidos"},"Apellidos",-1)),c(o("input",{type:"text",id:"apellidos","onUpdate:modelValue":e[1]||(e[1]=i=>s.value=i)},null,512),[[v,s.value]])]),o("div",R,[e[6]||(e[6]=o("label",{for:"contraseña"},"Contraseña",-1)),c(o("input",{type:"password",id:"contraseña","onUpdate:modelValue":e[2]||(e[2]=i=>a.value=i)},null,512),[[v,a.value]])]),o("div",x,[e[7]||(e[7]=o("label",{for:"contraseña2"},"Confirmar contraseña",-1)),c(o("input",{type:"password",id:"contraseña2","onUpdate:modelValue":e[3]||(e[3]=i=>n.value=i)},null,512),[[v,n.value]])]),o("button",{onClick:b(d,["prevent"])},"Crear")])])])]))}},j=g(h,[["__scopeId","data-v-fbcd12df"]]),S={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3000"},{VITE_API_URL:k}=S;class I{constructor(){this.registros=u([])}async registrarUsuario({nombre:t,apellidos:l,contraseña:r}){try{const s=await fetch(`${k}/api/listadelacompra/registro`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:t,apellidos:l,contraseña:r})});if(!s.ok){const a=await s.json();throw new Error(a.error||"Error al registrar usuario: "+s.status)}if(s.ok){const a=await s.json();this.registros.value.push(a)}}catch(s){throw s}}}const A=new I,N={__name:"RegistroUsuarioView",setup(m){const t=u(""),l=u(!1);async function r({nombre:a,apellidos:n,contraseña:d,contraseña2:p}){if(d!==p||!a||!n||!d||!p){t.value="Las contraseñas no coinciden, o faltan datos",s();return}try{await A.registrarUsuario({nombre:a,apellidos:n,contraseña:d}),t.value="Usuario registrado correctamente",s()}catch(e){console.error(e),t.value=e.message,s()}}function s(){l.value=!0,setTimeout(()=>{l.value=!1},2e3)}return(a,n)=>(_(),U(w,null,[f(j,{onCrearUsuario:r}),f(T,{mensajeToast:t.value,verToast:l.value},null,8,["mensajeToast","verToast"])],64))}};export{N as default};
