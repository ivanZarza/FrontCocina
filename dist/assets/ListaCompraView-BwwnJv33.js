import{_ as G,b as d,c as o,a as e,F as u,r as m,t as l,u as L,m as E,w,v as x,i as B,o as t}from"./index-Bd3iIt6k.js";import{h as q}from"./html2pdf-CHyY-T61.js";const V={class:"pagRecetas"},j=["onClick"],M={key:0,class:"container"},z={class:"resumen"},J={class:"datosRecetas"},U={class:"cabezeraResumen"},$={class:"pasosResumen"},H={class:"listaIngredientes"},K={class:"pasosResumen"},Q={class:"listaIngredientes"},W={class:"pasosResumen"},X={class:"listaIngredientes"},Y={class:"pieResumen"},Z={class:"descripcionFinal"},ee={class:"listaFinal"},ae={class:"ingredientesFinales"},se={key:0,class:"compraAñadida"},oe={class:"ingredientesAñadidos"},te={class:"compraAñadida"},ne={class:"agregarCompra"},le={__name:"ListaCompraView",setup(re){const r=d([]),n=d(r.value[0]),v=d(0),p=d([]),f=d({nombre:""}),_=d(null),A=B();R();function R(){r.value=JSON.parse(localStorage.getItem("recetas")||"[]"),b(),console.log(r.value)}function k(i){n.value=i}function b(){r.value.length>0?n.value=r.value[v.value]:(n.value=null,window.alert("No hay recetas guardadas, por favor crea una receta en la zona de RECETAS"),A.push({name:"recetas"}))}function y(){v.value<r.value.length-1&&(v.value++,b())}function D(){v.value>0&&(v.value--,b())}function I(){const i=r.value.filter(s=>s.nombre!==n.value.nombre);i.length===0?localStorage.removeItem("recetas"):localStorage.setItem("recetas",JSON.stringify(i)),R(),n.value=null}function P(){localStorage.removeItem("recetas"),R(),n.value=null,A.push({name:"recetas"})}function S(i){const s={};return i.forEach(g=>{["principal","acompañamiento","condimentos"].forEach(C=>{g[C]&&g[C].forEach(c=>{const h=c.nombre;s[h]?s[h].cantidad+=c.cantidad:s[h]={nombre:c.nombre,cantidad:c.cantidad,tipo:c.tipo,principal:c.principal,acompañamiento:c.acompañamiento,condimento:c.condimento}})})}),Object.values(s)}const F=S(r.value);function T(){p.value.push({...f.value}),f.value={nombre:"",cantidad:0}}function O(){p.value=[]}const N=()=>{const i={margin:1,filename:"lista-de-compras.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};_.value&&q().set(i).from(_.value).save()};return(i,s)=>(t(),o(u,null,[e("div",V,[(t(!0),o(u,null,m(r.value,a=>(t(),o("div",{key:a.nombre},[e("button",{onClick:g=>k(a)},l(a.nombre),9,j)]))),128))]),n.value?(t(),o("div",M,[e("div",z,[e("div",{class:"pag"},[e("button",{onClick:D},"RECETA ANTERIOR"),e("button",{onClick:y},"SIGUIENTE RECETA")]),e("div",J,[e("div",U,[e("h1",null,"Receta: "+l(n.value.nombre),1),e("h2",null," Para "+l(n.value.numeroDePersonas)+" "+l(n.value.numeroDePersonas===1?"persona":"personas"),1)]),e("div",$,[s[1]||(s[1]=e("h2",null,"Principal",-1)),e("div",H,[e("ol",null,[(t(!0),o(u,null,m(n.value.principal,a=>(t(),o("li",{key:a.id},l(a.nombre)+" - "+l(a.cantidad)+" Grs ",1))),128))])])]),e("div",K,[s[2]||(s[2]=e("h2",null,"Acompañamiento",-1)),e("div",Q,[e("ol",null,[(t(!0),o(u,null,m(n.value.acompanamiento,a=>(t(),o("li",{key:a.id},l(a.nombre)+" - "+l(a.cantidad)+" Grs ",1))),128))])])]),e("div",W,[s[3]||(s[3]=e("h2",null,"Condimentos",-1)),e("div",X,[e("ol",null,[(t(!0),o(u,null,m(n.value.condimentos,a=>(t(),o("li",{key:a.id},l(a.nombre)+" - "+l(a.cantidad)+" Grs ",1))),128))])])]),e("div",Y,[s[4]||(s[4]=e("h2",null,[e("strong",null,"Descripción:")],-1)),e("pre",Z,l(n.value.descripcion),1)])]),e("div",{class:"borrar"},[e("button",{onClick:I},"BORRAR RECETA SELECCIONADA"),e("button",{onClick:P},"BORRAR TODAS LAS RECETAS")])]),e("div",ee,[e("div",{class:"PDF",ref_key:"generarPDFRef",ref:_},[s[6]||(s[6]=e("h2",null," Estas son las cantidades de ingredientes que tienes que comprar para las recetas que has creado: ",-1)),e("div",ae,[e("ul",null,[(t(!0),o(u,null,m(L(F),a=>(t(),o("li",{key:a.nombre},l(a.nombre)+" - "+l(a.cantidad)+" Grs ",1))),128))])]),p.value.length>0?(t(),o("div",se,[s[5]||(s[5]=e("h2",null,"Estos son los productos que añadiste",-1)),e("div",oe,[e("ul",null,[(t(!0),o(u,null,m(p.value,a=>(t(),o("li",{key:a.nombre},l(a.nombre),1))),128))])])])):E("",!0)],512),e("div",te,[s[7]||(s[7]=e("h2",null,"Puedes agregar productos a la lista de la compra",-1)),e("div",ne,[w(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>f.value.nombre=a),placeholder:"Nombre del producto"},null,512),[[x,f.value.nombre]]),e("button",{onClick:T}," Agregar a la lista de la compra "),e("button",{onClick:O},"BORRAR COMPRA AGREGADA")])]),e("div",{class:"btnPdf"},[e("button",{onClick:N},"Generar PDF")])])])):E("",!0)],64))}},ue=G(le,[["__scopeId","data-v-5691c6e2"]]);export{ue as default};
